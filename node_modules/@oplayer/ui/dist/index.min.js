/**
 * name: @oplayer/ui
 * version: v1.2.32
 * description: ui plugin for oplayer
 * author: shiyiya
 * homepage: https://github.com/shiyiya/oplayer
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@oplayer/core")):"function"==typeof define&&define.amd?define(["@oplayer/core"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).OUI=t(e.OPlayer)}(this,(function(e){"use strict";var t,n,o,r,a,i,s,l;function c(e,t){return t||(t=e.slice(0)),e.raw=t,e}const d=e.$.cls("loading"),u=e.$.cls("playing"),h=e.$.cls("focused"),p=e.$.cls("fullscreen"),g=e.$.cls("settingShown"),m=e.$.css("display:none"),v="data-ctrl-hidden",f=e.$.css({["."+u]:{cursor:"none"}}),b=e.$.cls("error"),y=e.$.css(t||(t=c(["\n  z-index: 99 !important;\n  position: fixed !important;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;"]))),$=e.$.css({background:"none",border:"none",cursor:"pointer",padding:0,outline:"none",font:"inherit",color:"inherit","line-height":"inherit","text-align":"inherit",width:"100%","-webkit-tap-highlight-color":"transparent","user-select":"none"}),x=e.$.css({"& > *:nth-child(1)":{display:"none"}}),k=e.$.css({"& > *:nth-child(2)":{display:"none"}}),w=e.isMobile?"":e.$.css({position:"relative","&:hover":{"&::after":{opacity:1,transform:"translateX(-50%) scale(1)"},"&:not([data-tooltip-pos]):last-child::after":{right:0,left:"auto",transform:"translateY(0) scale(1)"},"&[data-tooltip-pos=down]::after":{transform:"translateX(-50%) scale(1)"},"&[data-tooltip-pos=down]:last-child::after":{right:0,transform:"translateY(0) scale(1)"}},"&::after":{position:"absolute",content:"attr(aria-label)",bottom:"100%",left:"50%","margin-bottom":"0.5em","white-space":"nowrap",background:"var(--shadow-background-color)",transform:"translate(-50%, 10px) scale(.8)","transform-origin":"50% 100%",opacity:0,padding:"6px 8px","border-radius":"2px",transition:"transform .2s ease .1s,opacity .2s ease .1s","pointer-events":"none","font-size":"0.75em"},"&[data-tooltip-pos=down]::after":{top:"100%",bottom:"auto","margin-top":"0.5em",transform:"translate(-50%, -10px) scale(.8)"},"&[data-tooltip-pos=down]:last-child::after":{right:0,top:"100%",bottom:"unset",left:"auto","margin-top":"0.5em",transform:"translateY(-10px) scale(.8)","transform-origin":"100% 0"},"&:not([data-tooltip-pos]):last-child::after":{right:0,left:"auto",transform:"translateY(10px) scale(.8)","transform-origin":"100% 100%"}}),L={play:'<svg viewBox="0 0 1024 1024"><path  d="M245.76 785.203V238.797c0-50.442 34.918-69.182 77.967-42.046l422.196 266.117c43.11 27.157 43.069 71.128 0 98.284L323.727 827.249c-43.11 27.177-77.967 8.315-77.967-42.046z" /></svg>',pause:'<svg viewBox="0 0 1024 1024"><path  d="M327.68 184.32a81.92 81.92 0 0 1 81.92 81.92v491.52a81.92 81.92 0 1 1-163.84 0V266.24a81.92 81.92 0 0 1 81.92-81.92z m368.64 0a81.92 81.92 0 0 1 81.92 81.92v491.52a81.92 81.92 0 1 1-163.84 0V266.24a81.92 81.92 0 0 1 81.92-81.92z" /></svg>',volume:['<svg viewBox="0 0 1024 1024"><path d="M128 426.666667v170.666666c0 23.466667 19.2 42.666667 42.666667 42.666667h128l140.373333 140.373333c26.88 26.88 72.96 7.68 72.96-30.293333V273.493333c0-37.973333-46.08-57.173333-72.96-30.293333L298.666667 384H170.666667c-23.466667 0-42.666667 19.2-42.666667 42.666667z m576 85.333333A192 192 0 0 0 597.333333 340.053333v343.466667c63.146667-31.146667 106.666667-96 106.666667-171.52zM597.333333 189.866667v8.533333c0 16.213333 10.666667 30.293333 25.6 36.266667C733.013333 278.613333 810.666667 386.56 810.666667 512s-77.653333 233.386667-187.733334 277.333333c-15.36 5.973333-25.6 20.053333-25.6 36.266667v8.533333c0 26.88 26.88 45.653333 51.626667 36.266667C793.6 815.36 896 675.84 896 512s-102.4-303.36-247.04-358.4c-24.746667-9.813333-51.626667 9.386667-51.626667 36.266667z"></path></svg>','<svg viewBox="0 0 1024 1024"><path d="M154.88 154.88a42.496 42.496 0 0 0 0 60.16L311.04 371.2 298.666667 384H170.666667c-23.466667 0-42.666667 19.2-42.666667 42.666667v170.666666c0 23.466667 19.2 42.666667 42.666667 42.666667h128l140.373333 140.373333c26.88 26.88 72.96 7.68 72.96-30.293333v-177.92l178.346667 178.346667c-20.906667 15.786667-43.52 29.013333-68.266667 38.826666-15.36 6.4-24.746667 22.613333-24.746667 39.253334 0 30.72 31.146667 50.346667 59.306667 38.826666 34.133333-14.08 66.133333-32.853333 94.72-55.893333l57.173333 57.173333a42.496 42.496 0 1 0 60.16-60.16L215.466667 154.88c-16.64-16.64-43.52-16.64-60.586667 0zM810.666667 512c0 34.986667-6.4 68.693333-17.493334 99.84l65.28 65.28c23.893333-49.92 37.546667-105.813333 37.546667-165.12 0-163.413333-102.4-303.36-246.613333-358.4-25.173333-9.813333-52.053333 9.813333-52.053334 36.693333v8.106667c0 16.213333 10.666667 30.293333 26.026667 36.266667C733.013333 279.04 810.666667 386.56 810.666667 512z m-371.626667-268.373333l-7.253333 7.253333L512 331.093333V273.493333c0-37.973333-46.08-56.746667-72.96-29.866666zM704 512A192 192 0 0 0 597.333333 340.053333v76.373334l105.813334 105.813333c0.426667-3.413333 0.853333-6.826667 0.853333-10.24z"></path></svg>'],fullscreen:['<svg viewBox="-113 -113 1250 1250"><path d="M0 232.732444A232.732444 232.732444 0 0 1 232.732444 0h558.535112A232.732444 232.732444 0 0 1 1024 232.732444v558.535112A232.732444 232.732444 0 0 1 791.267556 1024H232.732444A232.732444 232.732444 0 0 1 0 791.267556V232.732444z m232.732444-139.662222a139.662222 139.662222 0 0 0-139.662222 139.662222v558.535112a139.662222 139.662222 0 0 0 139.662222 139.662222h558.535112a139.662222 139.662222 0 0 0 139.662222-139.662222V232.732444a139.662222 139.662222 0 0 0-139.662222-139.662222H232.732444z"></path><path d="M549.575111 245.845333c0-25.799111 20.935111-46.734222 46.734222-46.734222h116.821334A140.202667 140.202667 0 0 1 853.333333 339.313778v116.821333a46.734222 46.734222 0 0 1-93.468444 0v-116.821333c0-25.827556-20.906667-46.734222-46.734222-46.734222h-116.821334a46.734222 46.734222 0 0 1-46.734222-46.734223zM245.845333 549.546667c25.799111 0 46.734222 20.935111 46.734223 46.734222v116.821333c0 25.827556 20.906667 46.734222 46.734222 46.734222h116.821333a46.734222 46.734222 0 0 1 0 93.468445h-116.821333A140.202667 140.202667 0 0 1 199.111111 713.130667v-116.821334c0-25.799111 20.935111-46.734222 46.734222-46.734222z"></path></svg>','<svg viewBox="-113 -113 1250 1250"><path d="M0.739556 233.130667a232.391111 232.391111 0 0 1 232.391111-232.391111h557.738666a232.391111 232.391111 0 0 1 232.391111 232.391111v557.738666a232.391111 232.391111 0 0 1-232.391111 232.391111H233.130667a232.391111 232.391111 0 0 1-232.391111-232.391111V233.130667z m232.391111-139.434667a139.434667 139.434667 0 0 0-139.434667 139.434667v557.738666a139.434667 139.434667 0 0 0 139.434667 139.434667h557.738666a139.434667 139.434667 0 0 0 139.434667-139.434667V233.130667a139.434667 139.434667 0 0 0-139.434667-139.434667H233.130667z"></path><path d="M601.088 186.652444c25.685333 0 46.506667 20.792889 46.506667 46.478223v96.796444c0 25.685333 20.792889 46.478222 46.478222 46.478222h96.796444a46.478222 46.478222 0 1 1 0 92.984889h-96.796444a139.434667 139.434667 0 0 1-139.463111-139.463111V233.130667c0-25.685333 20.821333-46.478222 46.478222-46.478223z m-414.435556 414.435556c0-25.656889 20.792889-46.478222 46.478223-46.478222h96.796444a139.434667 139.434667 0 0 1 139.463111 139.463111v96.796444a46.478222 46.478222 0 0 1-92.984889 0v-96.796444c0-25.685333-20.792889-46.478222-46.478222-46.478222H233.130667a46.478222 46.478222 0 0 1-46.478223-46.506667z"></path></svg>'],pip:['<svg viewBox="0 0 1024 1024"><path d="M768 213.333333H256a85.333333 85.333333 0 0 0-85.333333 85.333334v426.666666a85.333333 85.333333 0 0 0 85.333333 85.333334h170.666667a42.666667 42.666667 0 1 1 0 85.333333H256a170.666667 170.666667 0 0 1-170.666667-170.666667V298.666667a170.666667 170.666667 0 0 1 170.666667-170.666667h512a170.666667 170.666667 0 0 1 170.666667 170.666667v128a42.666667 42.666667 0 1 1-85.333334 0V298.666667a85.333333 85.333333 0 0 0-85.333333-85.333334z m-128 341.333334a128 128 0 0 0-128 128v85.333333a128 128 0 0 0 128 128h170.666667a128 128 0 0 0 128-128v-85.333333a128 128 0 0 0-128-128h-170.666667z"></path></svg>','<svg viewBox="0 0 1024 1024"><path d="m768,213.33333l-512,0a85.33333,85.33333 0 0 0 -85.33333,85.33334l0,426.66666a85.33333,85.33333 0 0 0 85.33333,85.33334l170.66667,0a42.66667,42.66667 0 1 1 0,85.33333l-170.66667,0a170.66667,170.66667 0 0 1 -170.66667,-170.66667l0,-426.66666a170.66667,170.66667 0 0 1 170.66667,-170.66667l512,0a170.66667,170.66667 0 0 1 170.66667,170.66667l0,128a42.66667,42.66667 0 1 1 -85.33334,0l0,-128a85.33333,85.33333 0 0 0 -85.33333,-85.33334zm-128,341.33334a128,128 0 0 0 -128,128l0,85.33333a128,128 0 0 0 128,128l170.66667,0a128,128 0 0 0 128,-128l0,-85.33333a128,128 0 0 0 -128,-128l-170.66667,0z"></path><g stroke="null"><g stroke="null" transform="matrix(0.6896517266997474,0,0,0.6896517266997474,-10241.200782450309,-10001.206060939305) "><rect stroke="null" x="15122.523407" y="14826.656681" width="582" height="402" fill="none"></rect></g><g stroke="null" transform="matrix(0.6896517266997474,0,0,0.6896517266997474,-10241.200782450309,-10001.206060939305) "><path stroke="null" d="m15503.523407,14924.856681l-161.8,0c-66.2,0 -120,53.8 -120,120l0,161.8c0,22.1 17.9,40 40,40s40,-17.9 40,-40l0,-144.4l169.8,169.8c7.8,7.8 18,11.7 28.3,11.7c10.2,0 20.5,-3.9 28.3,-11.7c15.6,-15.6 15.6,-40.9 0,-56.6l-170.7,-170.6l146.1,0c22.1,0 40,-17.9 40,-40s-17.9,-40 -40,-40z"></path></g></g></svg>'],setting:'<svg viewBox="0 0 1024 1024" style="scale:1.1"><path d="M0 0h1024v1024H0z" fill-opacity="0"></path><path d="M501.333333 127.573333a21.333333 21.333333 0 0 1 21.333334 0l316.928 182.954667a21.333333 21.333333 0 0 1 10.666666 18.474667v365.994666a21.333333 21.333333 0 0 1-10.666666 18.474667L522.666667 896.426667a21.333333 21.333333 0 0 1-21.333334 0l-316.928-182.954667a21.333333 21.333333 0 0 1-10.666666-18.474667V328.96a21.333333 21.333333 0 0 1 10.666666-18.474667zM512 219.946667L259.029333 365.952v292.053333L512 804.010667l252.928-146.005334V365.952L512 219.946667zM512 426.666667a85.333333 85.333333 0 1 1 0 170.666666 85.333333 85.333333 0 0 1 0-170.666666z"></path></svg>',screenshot:'<svg viewBox="0 0 1024 1024"><path d="M412.245333 757.333333a42.666667 42.666667 0 0 1-56.490666-64l356.48-314.794666a42.666667 42.666667 0 0 1 56.746666 0.256l112.896 101.461333a42.666667 42.666667 0 1 1-57.088 63.488L740.266667 467.626667l-328.021334 289.706666zM810.666667 213.333333h-128a42.666667 42.666667 0 0 1 0-85.333333h170.666666a42.666667 42.666667 0 0 1 42.666667 42.666667v170.666666a42.666667 42.666667 0 0 1-85.333333 0V213.333333zM213.333333 213.333333v128a42.666667 42.666667 0 1 1-85.333333 0V170.666667a42.666667 42.666667 0 0 1 42.666667-42.666667h170.666666a42.666667 42.666667 0 1 1 0 85.333333H213.333333z m597.333334 597.333334v-128a42.666667 42.666667 0 0 1 85.333333 0v170.666666a42.666667 42.666667 0 0 1-42.666667 42.666667h-170.666666a42.666667 42.666667 0 0 1 0-85.333333h128zM213.333333 810.666667h128a42.666667 42.666667 0 0 1 0 85.333333H170.666667a42.666667 42.666667 0 0 1-42.666667-42.666667v-170.666666a42.666667 42.666667 0 0 1 85.333333 0v128z m170.666667-298.666667a128 128 0 1 1 0-256 128 128 0 0 1 0 256z m0-85.333333a42.666667 42.666667 0 1 0 0-85.333334 42.666667 42.666667 0 0 0 0 85.333334z"></path></svg>',playbackRate:'<svg viewBox="0 0 1024 1024"><path d="M512 951.04a435.2 435.2 0 1 1 435.2-435.2 435.2 435.2 0 0 1-435.2 435.2z m0-819.2a384 384 0 1 0 384 384A384 384 0 0 0 512 132.096z"></path><path d="M468.992 493.824l-130.048-75.008a20.992 20.992 0 0 0-31.232 18.176v150.016a20.992 20.992 0 0 0 31.232 18.176l130.048-75.008a20.992 20.992 0 0 0 0-36.352zM684.8 493.824l-129.536-75.008a21.248 21.248 0 0 0-31.744 18.432v149.504a21.248 21.248 0 0 0 31.744 18.432l129.536-75.008a20.992 20.992 0 0 0 0-36.352z"></path></svg>',subtitle:'<svg viewBox="0 0 1024 1024" version="1.1"><path d="M800 170.666667A138.666667 138.666667 0 0 1 938.666667 309.333333v405.546667a138.666667 138.666667 0 0 1-138.666667 138.666667H224A138.666667 138.666667 0 0 1 85.333333 714.88V309.333333a138.666667 138.666667 0 0 1 130.816-138.453333L224 170.666667h576z m0 64H224l-6.144 0.256A74.666667 74.666667 0 0 0 149.333333 309.333333v405.546667c0 41.216 33.450667 74.666667 74.666667 74.666667h576a74.666667 74.666667 0 0 0 74.666667-74.666667V309.333333a74.666667 74.666667 0 0 0-74.666667-74.666666zM234.666667 512c0-134.229333 115.754667-203.733333 218.538666-145.109333A32 32 0 0 1 421.461333 422.4C361.856 388.437333 298.666667 426.410667 298.666667 512c0 85.546667 63.317333 123.562667 122.88 89.728a32 32 0 0 1 31.573333 55.637333C350.549333 715.733333 234.666667 646.101333 234.666667 512z m320 0c0-134.229333 115.754667-203.733333 218.538666-145.109333a32 32 0 0 1-31.744 55.552C681.856 388.437333 618.666667 426.410667 618.666667 512c0 85.546667 63.317333 123.562667 122.88 89.728a32 32 0 0 1 31.573333 55.637333C670.549333 715.733333 554.666667 646.101333 554.666667 512z"></path></svg>',loop:'<svg viewBox="0 0 32 32"><g><path d="m16 2a13.9 13.9 0 0 0 -9 3.32v-2.32a1 1 0 0 0 -2 0v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2h-2.89a11.87 11.87 0 0 1 7.89-3 12 12 0 1 1 -11.67 9.23 1 1 0 1 0 -1.94-.46 13.72 13.72 0 0 0 -.39 3.23 14 14 0 1 0 14-14z"/><path d="m14 21.2a2 2 0 0 0 1.06-.31l5.11-3.19a2 2 0 0 0 0-3.4l-5.11-3.19a2 2 0 0 0 -3.06 1.69v6.4a2 2 0 0 0 2 2zm0-8.4 5.11 3.2-5.11 3.2z"/></g></svg>',progressIndicator:null,loadingIndicator:null,quality:'<svg viewBox="0 0 32 32"><g><path d="m16 2a14 14 0 1 0 14 14 14 14 0 0 0 -14-14zm0 26a12 12 0 1 1 12-12 12 12 0 0 1 -12 12z"/><path d="m14.5 11a1 1 0 0 0 -1 1v3h-2v-3a1 1 0 0 0 -2 0v8a1 1 0 0 0 2 0v-3h2v3a1 1 0 0 0 2 0v-8a1 1 0 0 0 -1-1z"/><path d="m19.5 11h-2a1 1 0 0 0 -1 1v8a1 1 0 0 0 1 1h2a3 3 0 0 0 3-3v-4a3 3 0 0 0 -3-3zm1 7a1 1 0 0 1 -1 1h-1v-6h1a1 1 0 0 1 1 1z"/></g></svg>',lang:'<svg viewBox="0 0 1024 1024"><path d="M512 85.333333C277.333333 85.333333 85.333333 277.333333 85.333333 512s192 426.666667 426.666667 426.666667 426.666667-192 426.666667-426.666667S746.666667 85.333333 512 85.333333z m294.4 256H682.666667c-12.8-55.466667-34.133333-102.4-59.733334-153.6 76.8 29.866667 145.066667 81.066667 183.466667 153.6zM512 170.666667c34.133333 51.2 64 106.666667 81.066667 170.666666h-162.133334c17.066667-59.733333 46.933333-119.466667 81.066667-170.666666zM183.466667 597.333333c-8.533333-25.6-12.8-55.466667-12.8-85.333333s4.266667-59.733333 12.8-85.333333h145.066666c-4.266667 29.866667-4.266667 55.466667-4.266666 85.333333s4.266667 55.466667 4.266666 85.333333H183.466667z m34.133333 85.333334H341.333333c12.8 55.466667 34.133333 102.4 59.733334 153.6-76.8-29.866667-145.066667-81.066667-183.466667-153.6zM341.333333 341.333333H217.6c42.666667-72.533333 106.666667-123.733333 183.466667-153.6C375.466667 238.933333 354.133333 285.866667 341.333333 341.333333z m170.666667 512c-34.133333-51.2-64-106.666667-81.066667-170.666666h162.133334c-17.066667 59.733333-46.933333 119.466667-81.066667 170.666666z m98.133333-256H413.866667c-4.266667-29.866667-8.533333-55.466667-8.533334-85.333333s4.266667-55.466667 8.533334-85.333333h200.533333c4.266667 29.866667 8.533333 55.466667 8.533333 85.333333s-8.533333 55.466667-12.8 85.333333z m12.8 238.933334c25.6-46.933333 46.933333-98.133333 59.733334-153.6h123.733333c-38.4 72.533333-106.666667 123.733333-183.466667 153.6z m76.8-238.933334c4.266667-29.866667 4.266667-55.466667 4.266667-85.333333s-4.266667-55.466667-4.266667-85.333333h145.066667c8.533333 25.6 12.8 55.466667 12.8 85.333333s-4.266667 59.733333-12.8 85.333333h-145.066667z"></path></svg>',chromecast:null,danmaku:null,playlist:null,previous:null,next:null};var E,M;(M=E||(E={})).setupIcons=e=>{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(L[t]=e[t]);return L},M.get=e=>L[e];const z=t=>{const n=()=>t.$root.classList.add(d),o=()=>{t.isSourceChanging||t.$root.classList.remove(d)};"none"!=t.$video.preload&&n(),t.on("loadstart",(()=>{"none"==t.$video.preload&&o()})),t.on(["seeking","videoqualitychange","videosourcechange"],n),t.on(["canplaythrough","playing","pause","seeked","error"],o),t.on(t.options.autoplay||e.isSafari?"loadedmetadata":"canplay",(()=>t.$root.classList.remove(d))),t.on(["waiting","playing"],(e=>{"waiting"==e.type&&n();const r=t.currentTime,a=()=>{r!==t.currentTime?(o(),t.off("timeupdate",a)):n()};t.on("timeupdate",a)}))},S=(t,n)=>{(e=>{e.on("play",(()=>{e.$root.classList.add(u)})),e.on(["pause","videosourcechange"],(()=>{e.$root.classList.remove(u)}))})(t),z(t),(e=>{e.on("fullscreenchange",(t=>{t.payload.isWeb?e.$root.classList.toggle(y):e.$root.classList.toggle(p)}))})(t),e.isMobile||((e,t)=>{function n(t){let n=t.target;n&&(e.$root.contains(n)||e.$root==n)?e.$root.classList.add(h):e.$root.classList.remove(h)}t&&e.$root.classList.add(h),document.addEventListener("click",n),document.addEventListener("contextmenu",n),e.on("destroy",(()=>{document.removeEventListener("click",n),document.removeEventListener("contextmenu",n)}))})(t,n.autoFocus)};function T(e,t,n){return Math.min(Math.max(e,t),n)}function A(e){return e<10?"0"+e:""+e}function B(e){if(!isFinite(e))return"--:--";const t=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%3600%60);return(t>0?A(t)+":":"")+A(n)+":"+A(o)}const C=e=>{if((e=>e.$root.classList.contains(d))(e)||isNaN(e.duration))return void e.emit("notice",{text:e.locales.get("Please wait for loading to complete")});const t=(e=>{var t;try{const n=e.$video,o=e.$root,r=e.context.ui,a=document.createElement("canvas"),i=n.videoWidth,s=n.videoHeight;a.width=i,a.height=s,a.getContext("2d").drawImage(n,0,0,i,s);const l=(null==(t=r.$watermark)?void 0:t.style)||{},c=l.top,d=l.left,u=l.right,h=l.bottom;if(r.$watermark&&[c,d,u,h].filter((e=>null!=e)).length>1){const e=r.$watermark,t=e.offsetLeft,n=e.offsetTop,s=e.offsetWidth,l=e.offsetHeight,p=r.$watermark.getBoundingClientRect(),g=p.width,m=p.height;let v=0,f=0;d?v=t:u&&(v=i-(o.clientWidth-t-s)-s),c?f=n:h&&(f=i-(o.clientHeight-n-l)-l),a.getContext("2d").drawImage(r.$watermark,v,f,g,m)}return a.toDataURL("image/png")}catch(n){return n}})(e);if(t instanceof Error)e.emit("notice",{text:t.message});else{!function(e,t){const n=document.createElement("a");n.href=e,n.download=t,n.click()}(t,(e.options.source.title||"OPlayer-ScreenShot")+"-"+B(e.currentTime).replace(/:/g,"-")+".png")}},H=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500,n=null;const o=()=>n&&clearTimeout(n);return{callee:()=>{o(),n=setTimeout((()=>{e()}),t)},clear:o}};function P(e,t){return e.classList.add(t),e}function O(e,t){return e.classList.remove(t),e}function R(e,t){return e.classList.contains(t)}const I={dragStart:e.isMobile?"touchstart":"mousedown",dragMove:e.isMobile?"touchmove":"mousemove",dragEnd:e.isMobile?"touchend":"mouseup"},q={ArrowUp:e=>{const t=100*e.volume+10;e.setVolume(t/100),e.emit("notice",{text:e.locales.get("Volume: %s",~~(100*e.volume)+"%")})},ArrowDown:e=>{const t=100*e.volume-10;e.setVolume(t/100),e.emit("notice",{text:e.locales.get("Volume: %s",~~(100*e.volume)+"%")})},ArrowLeft:e=>{if(e.options.isLive||e.hasError)return;e.currentTime-5<0?e.seek(0):e.seek(e.currentTime-5),e.emit("notice",{text:B(e.currentTime)+" / "+B(e.duration)})},ArrowRight:e=>{e.options.isLive||e.hasError||(e.seek(e.currentTime+5),e.emit("notice",{text:B(e.currentTime)+" / "+B(e.duration)}))}," ":e=>e.togglePlay(),Escape:e=>{e.isFullScreen?e.exitFullscreen():e.$root.classList.contains(y)&&e.emit("fullscreenchange",{isWeb:!0})},f:e=>e.toggleFullScreen(),w:e=>e.emit("fullscreenchange",{isWeb:!0}),s:C};function V(e){const t=e.player,n=e.config;function o(e){var o,r,a,i;if("INPUT"==(null==(o=document.activeElement)?void 0:o.tagName)||(null==(r=document.activeElement)?void 0:r.getAttribute("contenteditable"))||!(null==(a=n.keyboard)?void 0:a.global)&&!(null==(i=n.keyboard)?void 0:i.focused)||n.keyboard.focused&&!(e=>e.$root.classList.contains(h))(t))return;const s=e.key;q[s]&&(e.preventDefault(),q[s](t))}e.keyboard.register=function(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(q[t]=e[t])},e.keyboard.unregister=function(e){e.forEach((e=>{delete q[e]}))},document.addEventListener("keydown",o),t.on("destroy",(()=>{document.removeEventListener("keydown",o)}))}const X="speed";function j(t){const n=t.player,o=t.config,r=t.$mask;e.isMobile&&!n.options.isLive&&o.slideToSeek&&"none"!=o.slideToSeek&&n.once("loadedmetadata",(()=>{let e,t=0,a=0,i=0,s=0;const l=n.$root.getBoundingClientRect();function c(e){if(0==t&&0==a)return;const o=e.changedTouches[0],r=o.clientX,i=o.clientY,c=r-t,d=a-i;if(Math.abs(c)<2&&Math.abs(d)<2)return;const u=function(e,t){return 180*Math.atan2(t,e)/Math.PI}(c,d);(u>=-45&&u<45||u>=135&&u<=180||u>=-180&&u<-135)&&(e.preventDefault(),s=60*c/l.width,n.emit("notice",{text:B(T(n.currentTime+s,0,n.duration))+" / "+B(n.duration),pos:"top"}))}function d(){0==t&&0==a||("long-touch"==o.slideToSeek&&i<1e3&&(e&&clearInterval(e),r.removeEventListener("touchmove",c)),Math.abs(s)>=1&&n.seek(T(n.currentTime+s,0,n.duration)),t=a=s=i=0)}"always"==o.slideToSeek&&(r.addEventListener("touchstart",(e=>{if(R(n.$root,g))return;const o=e.changedTouches[0],r=o.clientX,i=o.clientY;t=r,a=i})),r.addEventListener("touchmove",c),r.addEventListener("touchend",d)),"long-touch"==o.slideToSeek&&r.addEventListener("touchstart",(o=>{if(R(n.$root,g))return;const s=o.changedTouches[0],l=s.clientX,u=s.clientY;t=l,a=u,e=window.setInterval((()=>{i+=100,i>=1e3&&(clearInterval(e),n.emit("notice",{text:"slid left or right to seek",pos:"top"}),r.addEventListener("touchmove",c))}),100),r.addEventListener("touchend",d,{once:!0})}))}))}const F=e.$.css(n||(n=c(["\n  font-variant-numeric: tabular-nums;\n  font-size: 0.875em;\n  margin-top: 2px;\n"]))),N=e.$.css("width:0.5em;height:0.5em;background-color:var(--primary-color);border-radius:50%;margin-right:0.5em"),D=e.$.css("\n    position: absolute;\n    top: 10px;\n    right: 50%;\n    border-radius: 2px;\n    box-sizing: border-box;\n    transform: translate(50%, -100%);\n    transition: opacity 0.2s ease, top 0.2s ease;\n    font-size: 0.875em;\n"),U=e.$.css("\n    top: calc(100% - 10px);\n    right: 50%;\n    transform: translateX(50%);\n"),W=e.$.css({position:"relative",display:"flex",["& ."+D]:{visibility:"hidden",opacity:0,"background-color":"var(--shadow-background-color)"}}),Y=e.$.css({"&:hover":{"padding-top":"0.5em","margin-top":"-0.5em",["& ."+D]:{visibility:"visible",opacity:1,top:0}},"&[data-dropdown-pos=top]:hover":{"padding-bottom":"0.5em","margin-bottom":"-0.5em",["& ."+D]:{top:"100%"}}}),_=e.$.css({padding:"0 0.5em","min-width":"6em",display:"block",height:"2.4em","line-height":"2.4em",cursor:"pointer","text-align":"center","word-break":"keep-all","&:nth-last-child(1)":{"margin-bottom":"0px"},"& *":{"pointer-events":"none"},"&[aria-checked=true]":{color:"var(--primary-color)"},"&:hover":{"background-color":"rgba(255, 255, 255, 0.1)"}}),K=e.$.cls("textIcon"),G=e.$.css({color:"#fff",fill:"#fff",height:"2.5em",display:"flex","box-sizing":"border-box","justify-content":"space-between","align-items":"center","padding-bottom":e.isMobile?0:"4px","> div":{display:"flex","align-items":"center",margin:"0 -.5em",["& > ."+$+":last-child"+(e.isMobile?", & >  ."+$+'[aria-label="Play"], & >  .'+$+'[aria-label="Pause"]':"")]:{"margin-right":0}},["& ."+$+"."+K]:{width:"auto","min-width":"2em","font-size":"0.875em",padding:"0 4px","border-radius":"2px"},["& ."+$]:Object.assign({width:"2em",height:e.isMobile?"auto":"2em","margin-right":"6px","justify-content":"center","align-items":"center",display:"inline-flex","border-radius":e.isMobile?"50%":"2px","& > *":{height:"1.5em",width:"1.5em","pointer-events":"none",transition:"transform .2s ease-in-out"}},e.isMobile?{"&:active > *":{transform:"scale(.9)"}}:{"&:hover":{"background-color":"rgb(255 255 255 / .2)"}})}),J=e.$.css("display: block;"),Q=e.$.css("min-width: 15.5em;"),Z=e.$.css("min-width: 10.5em;"),ee=e.$.css("\n  display: none;\n  width: 1.4em;\n  height: 1.4em;\n"),te=e.$.css("\n  width: 2em;\n  height: 2em;\n  margin: 0 -10px 0 -5px;\n"),ne=e.$.css("\n  width: 2em;\n  height: 2em;\n  transform: rotate(180deg);\n  margin-left: -10px;\n"),oe=e.$.css({position:"absolute",cursor:"pointer",top:"0",left:"0",right:"0",bottom:"0","background-color":"#ccc",transition:".3s","border-radius":"34px","&:before":{position:"absolute",content:'""',height:"16px",width:"16px",left:"4px",bottom:"3px","background-color":"white",transition:".3s","border-radius":"50%"}}),re=e.$.css("\n  position: relative;\n  width: 40px;\n  height: 22px;\n"),ae=e.$.css("\n  white-space: nowrap;\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 0.8em;\n"),ie=e.$.css({height:"2.4em",cursor:"pointer",color:"#fff","justify-content":"space-between","align-items":"center",padding:"0 0.75em","line-height":"1",display:"flex",overflow:"hidden","& > *":{"pointer-events":"none"},"&:hover":{"background-color":"rgba(255, 255, 255, 0.1)"},"&[aria-checked='true']":{["& ."+ee]:{display:"block"},"&[data-index]":{"background-color":"rgba(255, 255, 255, 0.1)"},["& ."+oe]:{"background-color":"var(--primary-color)","&:before":{transform:"translateX(16px)"}}}}),se=e.$.css({display:"flex","align-items":"center","margin-right":"10px","& > svg":{width:"1.7em",height:"1.7em","margin-right":"0.5em"}}),le=e.$.css("\n  display: flex;\n  align-items: center;\n"),ce=e.$.css({width:"100%",display:"flex","align-items":"center","border-bottom":"1px solid rgb(255 255 255 / 10%)"}),de=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te;return"<svg "+(e?'class="'+e+'"':"")+' viewBox="0 0 32 32"><path d="m 12.59,20.34 4.58,-4.59 -4.58,-4.59 1.41,-1.41 6,6 -6,6 z" fill="#fff"></path></svg>'},ue=function(e){return'<div class="'+se+'">\n      '+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+"\n      <span>"+e+"</span>\n    </div>\n    <svg class="+ee+' viewBox="0 0 24 24">\n      <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="#fff"></path>\n    </svg>\n'},he=function(e){return'<div class="'+se+'">\n      '+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+"\n      <span>"+e+"</span>\n    </div>\n    <div class="+le+'>\n      <span role="label" class='+ae+"></span>\n      "+de()+"\n    </div>\n"},pe=e=>'<div class="'+ce+'">\n      '+de(ne)+"\n      <span>"+e+"</span>\n    </div>\n",ge=function(e){return'<div class="'+se+'">\n    '+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+"\n    <span>"+e+"</span>\n  </div>\n  <div class="+le+">\n    <label class="+re+">\n      <span class="+oe+"></span>\n    </label>\n  </div>\n"};function me(t){let n=t.type,o=t.key,r=t.name,a=t.icon,i=t.default,s=t.index,l=e.$.create("div."+ie,{"data-key":o,role:Boolean(n)?"menuitem":"menuitemradio","aria-haspopup":"selector"==n});const c={$row:l,$label:void 0};switch(n){case"switcher":l.innerHTML=ge(r,a),l.setAttribute("aria-checked",i||!1);break;case"selector":l.innerHTML=he(r,a),c.$label=l.querySelector('span[role="label"]');break;case"back":l.innerHTML=pe(r);break;default:l.innerHTML=ue(r,a),l.setAttribute("aria-checked",i||!1),"number"==typeof s&&l.setAttribute("data-index",s.toString())}return c}function ve(t,n,o){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!o||0==o.length)return;const a=r.key,i=r.target,s=r.parent,l=r.isSelectorOptionsPanel,c=r.name;let d={},u=a||"root";n[0]&&"root"==u?(d=n[0],u=n[0].key):(d.$ref=e.$.create("div."+(n[0]&&l?Z:Q),{"data-key":u,role:"menu"}),d.key=u,n.push(d)),d.parent=s;const h="root"==d.key;if(!h){const t=me({name:c,type:"back"}).$row;t.addEventListener("click",(()=>{var e;d.$ref.classList.remove(J),null==(e=d.parent)||e.$ref.classList.add(J)})),e.$.render(t,d.$ref)}for(let p=0;p<o.length;p++){const r=o[p],a=r.name,s=r.type,c=r.key,u=r.children,g=r.icon,m=r.default,v=r.onChange,f=me(Object.assign({name:a,type:s,key:c,icon:g,default:m},!h&&l&&{index:p})),b=f.$row,y=f.$label;if(e.$.render(b,d.$ref),e.$.render(d.$ref,i),u){const e="selector"==s&&u.every((e=>!Boolean(e.type))),o=ve(t,n,u,{key:c,target:i,parent:d,isSelectorOptionsPanel:e,name:"selector"==s?a:void 0});if(b.addEventListener("click",(()=>{d.$ref.classList.remove(J),o.$ref.classList.add(J)})),e){const e=u.find((e=>e.default));e&&(y.innerText=e.name),o.select=(e,t)=>{var n;if(-1==e)return void(null==(n=o.$ref.querySelector("[aria-checked=true]"))||n.setAttribute("aria-checked","false"));const r=o.$ref.querySelectorAll("[aria-checked]");if("true"!=r.item(e).getAttribute("aria-checked")){r.forEach((e=>e.setAttribute("aria-checked","false"))),r.item(e).setAttribute("aria-checked","true");const n=u[e];y.innerText=n.name,t&&(null==v||v(n,{index:e}))}},o.$ref.addEventListener("click",(e=>{const t=e.target;t.hasAttribute("data-index")&&(o.select(+t.getAttribute("data-index"),!0),d.$ref.classList.add(J),o.$ref.classList.remove(J))}))}}else"switcher"==s&&(b.select=function(e){const t="true"==this.getAttribute("aria-checked");this.setAttribute("aria-checked",""+!t),e&&(null==v||v(!t))},b.addEventListener("click",(()=>b.select(!0))))}return d}function fe(t){const n=t.player,o=t.$root,r=t.config,a=r.controlBar&&r.topSetting,i=r.settings||[],s=e.$.create("div."+(l=a?"top":"bottom",e.$.css({"z-index":"8","max-height":"75%","border-radius":"2px",display:"block",position:"absolute",right:"1em",[l]:"top"==l?"var(--control-bar-height)":"2.5em",overflow:"auto","background-color":"var(--shadow-background-color)",fill:"#fff","&::-webkit-scrollbar":{width:"2px"},"&::-webkit-scrollbar-thumb":{background:"var(--primary-color)"},"& > div":{display:"none","font-size":"0.875em"},["& > div."+J]:{display:"block"}})),{"aria-label":"Setting"});var l;let c=[],d=!1;const u={loop:{name:n.locales.get("Loop"),type:"switcher",key:"loop",icon:E.get("loop"),default:n.isLoop,onChange:e=>n.setLoop(e)}};function h(i){i.length<1||(d||(d=!0,e.$.render(s,o),function(){const o=e.$.create("button",{class:$+" "+w,"aria-label":n.locales.get("Settings"),"data-tooltip-pos":r.topSetting?"down":void 0},""+E.get("setting"));o.addEventListener("click",(e=>{function t(e){s.contains(e.target)||(n.$root.classList.remove(g),c.forEach((e=>e.$ref.classList.remove(J))),document.removeEventListener("click",t))}e.stopPropagation(),n.$root.classList.add(g),c[0].$ref.classList.add(J),setTimeout((()=>{document.addEventListener("click",t)}))}));const i=[r.pictureInPicture&&n.isPipEnabled,r.fullscreen].filter(Boolean).length;if(a){const e=t.$controllerBar.children[1];e.insertBefore(o,e.children[e.children.length])}else{const e=t.$controllerBottom.children[1];e.insertBefore(o,e.children[e.children.length-i])}}()),ve(n,c,i,{target:s}))}h(i.map((e=>"string"==typeof e?u[e]:e))),t.setting.register=function(e){h(Array.isArray(e)?e:[e])},t.setting.unregister=function(e){var t,n;d&&(null==(n=null==(t=c[0])?void 0:t.$ref.querySelector("[data-key="+e+"]"))||n.remove(),c=c.filter((t=>t.key!==e||(t.$ref.remove(),t=null,!1))))},t.setting.updateLabel=function(e,t){if(!d)return;const n=s.querySelector('[data-key="'+e+'"] span[role="label"]');n&&(n.innerText=t)},t.setting.select=function(e,t){var n;let o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(d)if("number"==typeof t)for(let r=0;r<c.length;r++){const n=c[r];if(n.key==e){n.select(t,o);break}}else null==(n=s.querySelector('[data-key="'+e+'"][aria-checked]'))||n.select(o)}}const be=e.$.css({position:"absolute",top:0,left:0,right:0,"z-index":7,padding:"0.5em 1em 0",transition:"transform 0.3s ease",height:"var(--control-bar-height)","&::before":{position:"absolute",content:"''",width:"100%",display:"block",top:0,left:0,bottom:"-1em","z-index":-1,transition:"opacity 0.3s ease","pointer-events":"none","background-image":"linear-gradient(rgba(0, 0, 0, .3), transparent)"},"& > div:nth-child(1)":{cursor:"pointer",overflow:"hidden"},["& > div:nth-child(2) ."+W+":last-child ."+D]:{right:"max(50%,3em)"},["@global ."+f+" &"]:{transform:"translateY(calc(-100%))","&::before":{opacity:0}}}),ye=e.$.css("width: 2.5em;height: 2.5em;margin:0 -10px;transform: rotate(180deg);"),$e=e.$.css("flex:1;font-size:1em;margin: 0 0.25em;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;"),xe=(t,n)=>{var o,r;const a=t.player,i=t.config;if(!i.controlBar)return;const s=i.controlBar.back,l=s&&e.isMobile,c=t.$controllerBar=e.$.create("div",{class:be+" "+G},"<div>\n    "+(l?"<span role='button' class=\""+ye+" "+("fullscreen"==s?m:"")+'">'+de("")+"</span>":"")+"\n      <h2 class='"+$e+"'>"+((null==(r=null==(o=a.options)?void 0:o.source)?void 0:r.title)||"")+"</h2>\n    </div>\n    <div></div>"),d=c.querySelector("."+$e);if(l){const e=d.previousElementSibling;e.addEventListener("click",(e=>{a.isFullScreen&&a.exitFullscreen(),a.emit("backward",e)})),"fullscreen"==s&&a.on("fullscreenchange",(()=>{a.isFullScreen?e.classList.remove(m):e.classList.add(m)}))}a.on("videosourcechanged",(e=>{let t=e.payload;d.innerText=t.title||""})),e.$.render(c,n)},ke=e.$.css(o||(o=c(["\n  width: 2.65em;\n  display: flex;\n  height: 7.65em;\n  box-sizing: border-box;\n  flex-direction: column;\n"]))),we=e.$.css("\n  width: 100%;\n  text-align: center;\n  height: 28px;\n  line-height: 28px;\n  margin-bottom: 2px;\n  font-size: 0.75em;\n"),Le=e.$.css("\n  position: relative;\n  display: flex;\n  justify-content: center;\n  flex: 1;\n  cursor: pointer;\n  padding: 5px 0 14px;\n"),Ee=e.$.css("\n  height: 100%;\n  width: 4px;\n  position: relative;\n"),Me=e.$.css("\n  width: 4px;\n  height: 100%;\n  overflow: hidden;\n  border-radius: 2px;\n  background: rgba(255, 255, 255, 0.3);\n"),ze=e.$.css("\n  height: 100%;\n  background-color: var(--primary-color);\n  transform-origin: 0 100%;\n"),Se=e.$.css(r||(r=c(["\n  position:absolute;\n  bottom: 0;\n  top: auto;\n  left: -4px;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background-color: var(--primary-color);\n  vertical-align: middle;\n  pointer-events: none;\n  "]))),Te=(t,n)=>{const o=e.$.create("div."+ke,{},"<div class="+we+">100</div>\n\n    <div class="+Le+">\n        <div class="+Ee+">\n          <div class="+Me+">\n            <div class="+ze+"></div>\n          </div>\n\n          <div class="+Se+"></div>\n        <div>\n      </div>"),r=o.querySelector("."+Le),a=o.querySelector("."+Se),i=o.querySelector("."+ze),s=o.querySelector("."+we),l=e=>{e.preventDefault(),t.setVolume(c((e=>{const t=r.getBoundingClientRect(),n=(t.bottom-(e.clientY||e.changedTouches[0].clientY))/t.height;return n>=1?1:n<=0?0:n})(e)))},c=e=>(s.innerText=""+~~(100*e),i.style.transform="scaleY("+e+")",a.style.bottom="calc("+~~(100*e)+"% - 6px)",e);c(t.volume),t.on("volumechange",(()=>{c(t.isMuted?0:t.volume)})),r.addEventListener(I.dragStart,(e=>{l(e),document.addEventListener(I.dragMove,l,{passive:!1}),document.addEventListener(I.dragEnd,(()=>{document.removeEventListener(I.dragMove,l)}),{once:!0})})),e.$.render(o,n)},Ae=e.$.css("\n  display: none;\n  bottom: 15px;\n  position: absolute;\n  left: 50%;\n  padding: 6px 8px;\n  background-color: var(--shadow-background-color);\n  color: #fff;\n  border-radius: 2px;\n  white-space: nowrap;\n  word-break: nowrap;\n  transform: translateX(-50%);"),Be=e.$.css({position:"absolute",width:"8px",height:"4px","background-color":"var(--highlight-color)",transform:"translateX(-3px)",transition:"all 0.2s",["&:hover > ."+Ae]:{display:"block"}});const Ce=e.$.css("\n  position: absolute;\n  left: 0;\n  bottom: 12px;\n  pointer-events: none;\n  transform: translateX(-50%);\n  background-position-y: center;\n  border-radius: 2px;\n  display: none;"),He=e.$.css("\n  position: absolute;\n  left: 0;\n  bottom: 12px;\n  pointer-events: none;\n  border-radius: 2px;\n  display: none;"),Pe={width:160,height:90};const Oe=e.$.css({"background-color":"hsla(0, 0%, 100%, 0.4)"}),Re=e.$.css({"background-color":"var(--primary-color)"}),Ie=e.$.css({width:"100%","pointer-events":"none",position:"relative","& > *":{content:"''",display:"block",position:"absolute",width:"1.4em",height:"1.4em",top:"calc(-0.7em + 2px)",left:"-0.7em",bottom:"0",transform:e.isMobile?"none":"scale(0)",transition:"transform 0.3s ease","z-index":"1"},"& > *:not(svg)":{width:"1em",height:"1em",top:"calc(-0.5em + 2px)",left:"-0.5em","border-radius":"50%","background-color":"#fff"}}),qe=e.$.css({position:"absolute",left:"0","border-radius":"2px",padding:"6px 8px","background-color":"var(--shadow-background-color)",color:"#fff","z-index":"2","pointer-events":"none",transform:"translateX(-50%)",display:"none",bottom:"15px"}),Ve=e.$.css("/* progressDragging */"),Xe=e.$.css(Object.assign({position:"relative","box-sizing":"border-box",padding:"6px 0px 4px",cursor:"pointer",width:"100%","font-size":"0.75em",["&."+Ve+" ."+qe+", &."+Ve+" ."+Ce+", &."+Ve+" ."+He]:{display:"block"}},e.isMobile?{["@global ."+f+" ."+Ie+" > *"]:{transform:"scale(0)"}}:{["&."+Ve+" ."+Ie+" > *, &:hover ."+Ie+" > *"]:{transform:"scale(1)"}})),je=e.$.css({position:"relative",height:"4px",width:"100%","background-color":"hsla(0, 0%, 100%, 0.2)",["& ."+Oe+", & ."+Re]:{position:"absolute",left:"0",top:"0",bottom:"0","pointer-events":"none"}}),Fe=(t,n)=>{var o;const r=t.player,a=t.config;if(r.options.isLive)return;const i=t.$progress=e.$.create("div."+Xe,{},"<div class="+je+'>\n      <div class="'+qe+'">00:00</div>\n      <div class="'+Oe+'" style="width:0%"></div>\n      <div class="'+Re+'" style="width:0%"></div>\n      <div class="'+Ie+'" style="transform: translateX(0%);">\n        '+(E.get("progressIndicator")||"<span />")+"\n      </div>\n  </div>"),s=i.firstElementChild;(null==(o=a.thumbnails)?void 0:o.isVTT)?console.warn("vtt thumbnails support by @oplayer/pluins"):function(t,n){const o=t.config.thumbnails,r=t.player;let a,i=!1;const s=e.$.render(e.$.create("div."+Ce),n);function l(e){if(i&&e){const t=[a.width/2,n.clientWidth],o=t[0],r=t[1],i=o/r,l=(r-o)/r;if(s.style.left=100*(e<i?i:e>l?l:e)+"%",Array.isArray(a.src)){const t=a.number*e,n=Math.ceil(t/(a.x*a.y))-1,o=t%a.number,r=Math.floor(o/a.x),i=Math.ceil(o%a.x);s.style.backgroundImage="url("+a.src[n]+")",s.style.backgroundPosition=-i+"00% "+-r+"00%"}else{const t=Math.floor(e*a.number);s.style.backgroundPositionX="-"+t+"00%"}}else i=!0,s.style.width=a.width+"px",s.style.height=a.height+"px",Array.isArray(a.src)||(s.style.backgroundImage="url("+a.src+")")}function c(e){i=!1,a=Object.assign({},Pe,e),a.y&&!Array.isArray(a.src)&&(a.src=[a.src]),t.progressHoverCallback.push(l)}(null==o?void 0:o.src)&&c(o),r.on("videosourcechange",(()=>{i=!1,s.style.backgroundImage="none",t.progressHoverCallback.splice(t.progressHoverCallback.findIndex((e=>e==l)),1)})),t.changThumbnails=c}(t,s),t.vttThumbnailsCls=He,function(t,n){const o=t.player,r=t.config.highlight;let a=[];function i(t){const n=e.$.create("div."+Be,{},'<span class="'+Ae+'">'+t.text+"</san>");return n.style.left=t.left+"%",n}function s(t,o){a.forEach((e=>e.remove()));for(let r=0;r<t.length;r++){const s=t[r],l=i({left:s.time/o*100,text:s.text});a.push(l),e.$.render(l,n)}}function l(e){o.duration!==1/0&&o.duration>0?s(e,o.duration):o.once("loadedmetadata",(function(){s(e,o.duration)}))}n.style.setProperty("--highlight-color",(null==r?void 0:r.color)||"#FFF"),(null==r?void 0:r.source)&&l(r.source),o.on("videosourcechange",(()=>{a.forEach((e=>e.remove())),a=[]})),t.changHighlightSource=function(e){l(e)}}(t,s);const l=i.querySelector("."+Oe),c=i.querySelector("."+Re),d=i.querySelector("."+Ie),u=i.querySelector("."+qe);let h=!1;const p=e=>{const t=i.getBoundingClientRect(),n=((e.clientX||e.changedTouches[0].clientX)-t.left)/t.width;return n>=1?1:n<=0?0:n},g=e=>{const t=p(e),n=100*t;return c.style.width=n+"%",d.style.transform="translateX("+n+"%)",u.innerText=B(r.duration*t),u.style.left=n+"%",t};i.addEventListener(I.dragStart,(e=>{h=!0,i.classList.add(Ve);const n=g(e);function o(e){e.preventDefault();const n=g(e);t.progressHoverCallback.forEach((e=>e(n)))}t.progressHoverCallback.forEach((e=>e(n))),document.addEventListener(I.dragMove,o,{passive:!1}),document.addEventListener(I.dragEnd,(e=>{i.classList.remove(Ve),h=!1,document.removeEventListener(I.dragMove,o),isNaN(r.duration)||r.seek(p(e)*r.duration)}),{once:!0})})),e.isMobile||(i.addEventListener("mouseenter",(()=>{h||t.progressHoverCallback.forEach((e=>e()))})),i.addEventListener("mousemove",(e=>{if(h)return;i.classList.add(Ve),e.target.classList.contains(Be)?u.style.display="none":u.removeAttribute("style");const n=p(e);u.innerText=B(r.duration*n),u.style.left=100*n+"%",t.progressHoverCallback.forEach((e=>e(n)))}),{passive:!1}),i.addEventListener("mouseleave",(()=>{h||i.classList.remove(Ve)}))),r.on(["timeupdate","seeking"],(()=>{if(h)return;const e=r.currentTime/r.duration*100||0;c.style.width=e+"%",d.style.transform="translateX("+e+"%)"})),r.on("progress",(()=>{const e=r.buffered.length?r.buffered.end(r.buffered.length-1)/r.duration*100:0;l.style.width=e+"%"})),r.on("videosourcechange",(()=>{l.style.width="0%",c.style.width="0%",d.style.transform="translateX(0%)"})),e.$.render(i,n)},Ne=e.$.css({position:"absolute",left:0,right:0,bottom:0,"z-index":7,padding:"0 1em",transition:"transform 0.3s ease, padding 0.3s ease","&::before":{position:"absolute",content:"''",width:"100%",display:"block",bottom:0,left:0,"z-index":-1,top:"-1em",transition:"opacity 0.3s ease","pointer-events":"none","background-image":"linear-gradient(transparent, rgba(0, 0, 0, .3))"},["@global ."+f+" &"]:{padding:0,"pointer-events":"none",transform:"translateY(calc(100% - 8px))","&::before":{opacity:0}}}),De=(t,n)=>{const o=t.player,r=t.config,a=e.$.render(e.$.create("div."+Ne),n);r.miniProgressBar||e.$.css({["@global ."+f+" ."+Ne]:{transform:"translateY(100%)"}}),Fe(t,a);const i=[o.locales.get("Play"),o.locales.get("Pause"),o.locales.get("Screenshot"),o.locales.get("Picture in Picture"),o.locales.get(o.isFullscreenEnabled?"Fullscreen":"WebFullscreen"),o.locales.get("Previous"),o.locales.get("Next")],s=i[0],l=i[1],c=i[2],d=i[3],u=i[4],h=i[5],g=i[6],m=E.get("previous")||"",v=E.get("next")||"",b=t.$controllerBottom=e.$.create("div."+G,{},"<div>\n\n    "+(m&&'<button class="'+$+" "+w+'" aria-label="'+h+'" >'+m+"</button>")+'\n\n      <button\n        class="'+$+" "+(o.isPlaying?x:k)+" "+w+'"\n        aria-label="'+s+'"\n      >\n        '+E.get("play")+"\n        "+E.get("pause")+"\n      </button>\n\n      "+(v&&'<button class="'+$+" "+w+'" aria-label="'+g+'">'+v+"</button>")+"\n\n      "+(o.options.isLive?'<span class="'+N+'"></span>':"")+"\n\n      <span class="+F+">"+(o.options.isLive||"none"==o.$video.preload?"00:00":"00:00 / --:--")+'</span>\n    </div>\n\n    <div>\n      <div class="'+W+" "+Y+'">\n        <button class="'+$+" "+(o.isMuted?x:k)+'" aria-label="Volume">\n            '+E.get("volume")[0]+"\n            "+E.get("volume")[1]+"\n        </button>\n        "+(e.isIOS?"":"<div class="+D+"></div>")+"\n      </div>\n\n      "+(r.screenshot?'<button class="'+$+" "+w+'" aria-label="'+c+'">\n              '+E.get("screenshot")+"\n            </button>":"")+"\n\n      "+(r.pictureInPicture&&o.isPipEnabled?'<button\n              class="'+$+" "+w+" "+(o.isInPip?x:k)+'"\n              aria-label="'+d+'">\n                '+E.get("pip")[0]+"\n                "+E.get("pip")[1]+"\n            </button>":"")+"\n\n      "+(r.fullscreen?'<button class="'+$+" "+k+" "+w+'" aria-label="'+u+'">\n                '+E.get("fullscreen")[0]+"\n                "+E.get("fullscreen")[1]+"\n              </button>":"")+"\n    </div>"),L=b.querySelector("button[aria-label=Volume]");e.isIOS||Te(o,L.nextElementSibling);const M=b.querySelector("button[aria-label="+s+"]"),z=b.querySelector("."+F),S=b.querySelector('button[aria-label="'+u+'"]'),T=b.querySelector('button[aria-label="'+d+'"]'),A=(e,t)=>{e.classList.add(t?x:k),e.classList.remove(t?k:x)};r.fullscreen&&o.on("fullscreenchange",(()=>setTimeout((()=>{A(S,(e=>e.$root.classList.contains(p)||e.$root.classList.contains(y))(o))})))),r.pictureInPicture&&o.on(["enterpictureinpicture","leavepictureinpicture"],(()=>A(T,o.isInPip))),o.on(["play","pause","videosourcechange"],(()=>{M.setAttribute("aria-label",o.isPlaying?l:s),A(M,o.isPlaying)})),o.on("volumechange",(()=>A(L,o.isMuted))),o.on(["durationchange","timeupdate","seeking","seeked"],(()=>{z.innerText=B(o.currentTime)+" "+(o.options.isLive?"":"/ "+B(o.duration))})),o.on("videosourcechange",(()=>{z.innerText=o.options.isLive||"none"==o.$video.preload?"00:00":"00:00 / --:--"})),b.addEventListener("click",(t=>{switch(t.target.getAttribute("aria-label")){case s:case l:return o.togglePlay();case"Volume":if(e.isMobile&&!e.isIOS)return;o.isMuted?o.unmute():o.mute();break;case d:return o.togglePip();case u:return void((e=>e.$root.classList.contains(y))(o)||!o.isFullscreenEnabled?o.emit("fullscreenchange",{isWeb:!0}):o.toggleFullScreen());case c:C(o);break;case g:o.emit("next");break;case h:o.emit("previous")}})),e.$.render(b,a)},Ue=t=>{const n=t.player,o=t.config,r=t.$root,a=e.$.create("div");xe(t,a),De(t,a),"played"==o.showControls&&(P(a,m),n.once("play",(()=>{O(a,m)})));const i=()=>{var t;!n.isPlaying&&!e.isMobile||R(n.$root,f)||R(n.$root,g)||R(n.$root,b)||n.$root.contains(document.activeElement)&&"INPUT"==(null==(t=document.activeElement)?void 0:t.tagName)||(P(n.$root,f),n.$root.setAttribute(v,"true"),n.emit("controllervisibilitychange",!1))},s=H(i,2e3),l=s.callee,c=s.clear,d=()=>{c(),R(n.$root,f)&&(O(n.$root,f),n.$root.setAttribute(v,"false"),n.emit("controllervisibilitychange",!0))};n.on("play",l),n.on(["pause","videosourcechange"],d),n.on("destroy",c),e.isMobile||(n.$root.addEventListener("mousemove",(()=>{d(),l()})),n.$root.addEventListener("mouseleave",i)),t.toggleController=function(){R(a,m)?n.play():R(n.$root,f)?d():i()},e.$.render(a,r)},We={opacity:0,"pointer-events":"none"},Ye=e.$.css(Object.assign({transition:"opacity 100ms linear",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",fill:"#fff",width:"3em",height:"3em","z-index":"7","& > button":{width:"100%",height:"100%","border-radius":"100%",background:"var(--primary-color)",opacity:.9,padding:"1em",transition:"transform .2s ease-in-out","&:active":{transform:"scale(.85)"},"& > *":{position:"relative",width:"1.5em",height:"1.5em",left:"-0.2em",top:"-0.25em"}},["@global ."+u+" &"]:We,["@global ."+d+" &"]:We,["@global ."+b+" &"]:We},e.isMobile&&{["@global ."+f+" &"]:We})),_e=(t,n)=>{const o=e.$.create("div."+Ye,{},'<button aria-label="Play" class="'+$+'" type="button">\n      '+E.get("play")+"\n    </button>");return e.$.render(o,n).addEventListener("click",(()=>t.play())),o},Ke=e.$.css("\n  display: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  color: #fff;\n  background: #000;\n  z-index: 7;\n  align-items: center;\n  padding: 0 10px;\n  word-break: break-all;\n  justify-content: center;\n"),Ge=e.$.css("display: flex;"),Je={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},Qe=(t,n,o)=>{if(o.errorBuilder)return void t.on("error",(e=>{let t=e.payload;o.errorBuilder(t)}));const r=e.$.render(e.$.create("div."+Ke,{"aria-label":"Error Overlay"}),n);function a(e){var n;let o="";if(e instanceof Event){const t=null==(n=e.target)?void 0:n.error;if(!t||!t.message&&"number"!=typeof t.code)return;o=t.message||Je[t.code]}else o=e.message;r.innerText=o||"UNKNOWN_ERROR",t.$root.classList.add(b),P(r,Ge)}return t.on(["videosourcechange","videoqualitychange"],(function(){O(r,Ge),t.$root.classList.remove(b),r.innerText=""})),t.on("error",(e=>a(e.payload))),a},Ze=e.$.css({position:"absolute",top:"0",bottom:"0",left:"0",right:"0",display:"none","align-items":"center","justify-content":"center",["@global ."+d+" &"]:{display:"flex"}}),et=e.$.css({position:"relative",overflow:"hidden",width:"20%",height:"4px","border-radius":"4px","&::before,&::after":{display:"block",content:"''",position:"absolute",height:"100%",width:"100%","background-color":"var(--primary-color)","border-radius":"4px"},"&::before":{opacity:"0.4"},"&::after":{animation:"indeterminate 1.3s infinite linear","transform-origin":"0% 50%"},"@keyframes indeterminate":{"0%":{transform:"translateX(0) scaleX(0)"},"10%":{transform:"translateX(0) scaleX(0.2)"},"40%":{transform:"translateX(0) scaleX(0.7)"},"60%":{transform:"translateX(60%) scaleX(0.4)"},"100%":{transform:"translateX(100%) scaleX(0.2)"}}}),tt=(t,n)=>{const o=e.$.create("div."+Ze,{"aria-label":"Loading"},""+(E.get("loadingIndicator")||'<div class="'+et+'"></div>'));e.$.render(o,n)},nt=e.$.css({width:"100%",height:"100%",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",["@global ."+g+" &"]:{"z-index":"8"}}),ot=t=>{const n=t.player,o=t.$root,r=t.$mask=e.$.create("div."+nt);let a,i=0;r.addEventListener("click",(()=>{R(n.$root,g)||(e.isMobile?t.toggleController():(0==i&&n.togglePlay(),a&&clearTimeout(a),a=window.setTimeout((()=>{2==i&&(n.togglePlay(),n.toggleFullScreen()),i=0}),200)),i+=1)})),e.$.render(r,o)},rt=e=>{const t="true"==e.getAttribute("aria-checked");e.setAttribute("aria-checked",""+!t),((e,t)=>{var n=[],o=e.parentNode.children;for(let r=0,a=o.length;r<a;r++)o[r]!==e&&(null==t||t(o[r]),n.push(o[r]))})(e,(e=>e.setAttribute("aria-checked",""+t)))},at=e.$.css({position:"absolute",display:"none",top:"0.625em",left:"0.625em",right:"0.625em","z-index":9,"margin-top":"var(--control-bar-height)",transition:"margin 0.2s",["@global ."+f+" &"]:{"margin-top":0}}),it=e.$.css("\n  -moz-user-select: all;\n  -webkit-user-select: all;\n  -ms-user-select: all;\n  user-select: all;\n  color: #fff;\n  background-color: var(--shadow-background-color);\n  border-radius: 2px;\n  padding: 5px 10px;\n  font-size: 0.875em;\n"),st=e.$.css(a||(a=c(["\n  text-align: center;\n"]))),lt=e.$.css(i||(i=c(["\n  text-align: right;\n"]))),ct=e.$.css(s||(s=c(["\n  bottom: 6em;\n  top: initial;\n"]))),dt={center:e.$.css(l||(l=c(["\n  top: 50%;\n  text-align: center;\n  transform: translateY(-50%);\n"]))),left:"","top-left":"",top:st,"top-center":st,"top-right":lt,right:lt,bottom:ct,"left-bottom":ct},ut=e.$.css("display:block;"),ht=t=>{const n=t.player,o=t.$root,r=e.$.create("div."+at,{"aria-label":"Notice"},'<span class="'+it+'"></span>'),a=r.querySelector("."+it),i=H((()=>O(r,ut)),2e3).callee;function s(e,t){a.innerHTML=e,r.className=at+" "+ut+" "+dt[t||"left"],i()}return n.on("notice",(e=>{let t=e.payload;return s(t.text,t.pos)})),t.notice=s,e.$.render(r,o),s};function pt(e){return URL.createObjectURL(new Blob([e],{type:"text/vtt"}))}const gt="Subtitle";class mt{constructor(e,t,n,o){this.player=e,this.setting=t,this.el=n,this.isShow=!1,this.update=()=>{var e;const t=this.$dom,n=null==(e=this.player.$video.textTracks[0])?void 0:e.activeCues;if(null==n?void 0:n.length){let e="";for(let t=0;t<n.length;t++){const o=n[t];o&&(e+=o.text.replace(/\\h/g,"&nbsp;").split(/\r?\n/).map((e=>"<p><span>"+e+"</span></p>")).join(""))}t.innerHTML=e}else t.innerHTML=""},window.TextDecoder?(this.setting=t,this.options=Object.assign({source:[]},o),this.processDefault(),this.createContainer(),this.load(),this.loadSetting(),this.player.on(["destroy","videosourcechange"],this.destroy.bind(this))):e.emit("notice",{text:e.locales.get("TextDecoder not supported")})}updateSource(e){this.changeSource(e)}changeSource(e){this.options.source=e,this.processDefault(),this.load(),this.loadSetting(),this.player.emit("subtitlesourcechange",e)}changeOffset(){var e,t;const n=this.currentSubtitle.offset,o=null==(e=this.player.$video.textTracks[0])?void 0:e.cues;if(n){const e=this.player.duration;Array.from(o||[]).forEach((t=>{t.startTime=T(t.startTime+n,0,e),t.endTime=T(t.endTime+n,0,e)})),this.$iosTrack&&Array.from((null==(t=this.player.$video.textTracks[1])?void 0:t.cues)||[]).forEach((t=>{t.startTime=T(t.startTime+n,0,e),t.endTime=T(t.endTime+n,0,e)}))}}processDefault(){this.currentSubtitle=this.options.source.find((e=>e.default))}createContainer(){const t=this.el,n=this.options,o=n.color,r=n.shadow,a=n.fontSize,i=n.bottom,s=n.fontFamily,l=n.background,c=n.marginBottom;this.$dom=e.$.create("div."+e.$.css(Object.assign({left:"2%",right:"2%","text-align":"center","pointer-events":"none",position:"absolute","line-height":"1.5","font-family":s||"inherit",color:o||"#fff","text-shadow":r||"1px 0 1px #000, 0 1px 1px #000, -1px 0 1px #000, 0 -1px 1px #000, 1px 1px 1px #000, -1px -1px 1px #000, 1px -1px 1px #000, -1px 1px 1px #000",bottom:i||"2%","font-size":(a||(e.isMobile?16:20))/16+"em","& > p":{margin:0,"& span":{"white-space":"pre-wrap",background:l?"rgba(8, 8, 8, 0.75)":"inherit",padding:"0 0.25em"}}},!e.isMobile&&{"margin-bottom":c||"2.2em",transition:"margin 0.3s",["@global ."+f+" &"]:{"margin-bottom":0}})),{"aria-label":"Subtitle"}),e.$.render(this.$dom,t)}createTrack(){this.$track=e.$.render(e.$.create("track",{default:!0,kind:"metadata"}),this.player.$video),this.player._requestFullscreen||(this.$iosTrack=e.$.render(e.$.create("track",{default:!1,kind:"captions"}),this.player.$video),this.player.$video.textTracks[1].mode="hidden",this.player.on("fullscreenchange",(e=>{e.payload.isWeb||(this.player.isFullScreen?this.isShow&&(this.player.$video.textTracks[1].mode="showing"):this.player.$video.textTracks[1].mode="hidden")})))}load(){this.currentSubtitle&&(this.$track||this.createTrack(),this.loadSubtitle().then((()=>{this.$track.addEventListener("load",(()=>{isNaN(this.player.duration)?this.player.once("loadedmetadata",(()=>{this.changeOffset()})):this.changeOffset(),this.show()}),{once:!0})})).catch((e=>{this.player.emit("notice",{text:e.message})})))}destroy(){const e=this.$dom,t=this.$track,n=this.$iosTrack;null==t||t.removeEventListener("cuechange",this.update),e.innerHTML="",this.setting.unregister(gt),(null==t?void 0:t.src)&&URL.revokeObjectURL(t.src),(null==n?void 0:n.src)&&URL.revokeObjectURL(n.src),null==t||t.remove(),null==n||n.remove(),this.$track=void 0,this.$iosTrack=void 0,this.isShow=!1}show(){this.isShow=!0,this.$track.addEventListener("cuechange",this.update)}hide(){const e=this.$track,t=this.$dom;this.isShow=!1,t.innerHTML="",e.removeEventListener("cuechange",this.update)}loadSubtitle(){const e=this.currentSubtitle,t=this.player,n=this.$track,o=this.$iosTrack,r=e.src,a=e.encoding,i=e.type,s=void 0===i?"auto":i;return fetch(r).then((e=>e.arrayBuffer())).then((e=>{var t;const n=new TextDecoder(a).decode(e);switch("auto"==s?null==(t=/srt|ass|vtt(#|\?|$)/i.exec(r))?void 0:t[0]:s){case"srt":return pt("WEBVTT \r\n\r\n".concat((o=n,o.replace(/(\d\d:\d\d:\d\d)[,.](\d+)/g,((e,t,n)=>{let o=n.slice(0,3);return 1===n.length&&(o=n+"00"),2===n.length&&(o=n+"0"),t+","+o}))).replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat("\r\n\r\n")));case"ass":return pt(function(e){const t=new RegExp("Dialogue:\\s\\d+,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}(.*)$","i");return"WEBVTT\r\n\r\n"+e.split(/\r?\n/).map((e=>{const n=e.match(t);return n&&n[1]&&n[2]&&n[5]?{start:n[1],end:n[2],text:(o=n[5].replace(/{[\s\S]*?}/g,"").replace(/\\N/g,"\r\n").replace(/\\n/g," ").replace(/\\h/g,"&nbsp;"),o.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[e]||e))))}:null;var o})).filter((e=>null!=e)).map(((e,t)=>t+1+"\r\n0"+e.start+"0 --\x3e 0"+e.end+"0\r\n"+e.text)).join("\r\n\r\n")}(n));case"vtt":return pt(n);default:return r}var o})).then((e=>{(null==n?void 0:n.src)&&URL.revokeObjectURL(n.src),n.src=e,o&&(o.src&&URL.revokeObjectURL(o.src),o.src=e)})).catch((e=>{t.emit("notice",{text:"Subtitle"+e.message})}))}loadSetting(){const e=this.options.source;e.length&&(this.setting.unregister(gt),this.setting.register({name:this.player.locales.get("Subtitle"),type:"selector",icon:E.get("subtitle"),key:gt,onChange:e=>{let t=e.value;t?(this.currentSubtitle=t,this.$dom.innerHTML="",this.load()):this.hide()},children:[{name:this.player.locales.get("OFF"),default:!this.currentSubtitle}].concat(null==e?void 0:e.map((e=>{var t;return{name:e.name,default:(null==(t=this.currentSubtitle)?void 0:t.src)==e.src,value:e}})))}))}}const vt={fullscreen:!0,coverButton:!0,miniProgressBar:!0,autoFocus:!0,forceLandscapeOnFullscreen:!0,showControls:"always",keyboard:{focused:!0},settings:["loop"],theme:{primaryColor:"#6668ab"},speeds:["2.0","1.5","1.25","1.0","0.75","0.5"]};class ft{constructor(t){this.config=t,this.key="ui",this.version="1.2.32",this.name="oplayer-theme-ui",this.keyboard={},this.setting={},this.menu={},this.progressHoverCallback=[],this.config=e.mergeDeep({},vt,t)}apply(t){var n,o;const r=this.config;this.player=t;const a=this.$root=e.$.create("div."+(t=>e.$.css(Object.assign({"--primary-color":""+t.theme.primaryColor,"--shadow-background-color":"rgba(28 ,28 ,28 , .9)","--control-bar-height":t.controlBar?"2.5em":0,position:"absolute",top:"0",left:"0",width:"100%",height:"100%","line-height":1,"font-size":e.isMobile?"16px":"18px","&, & > *":{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"},"& [hidden]":{display:"none"}},{["@global ."+y+" &"]:{"font-size":e.isMobile?"18px":"22px"},["@global ."+p+" &"]:{"font-size":e.isMobile?"18px":"22px"}})))(r));return((e,t)=>{var n;const o=null==(n=t.theme)?void 0:n.watermark;if(!o)return;const r=e.$watermark=document.createElement("img");r.setAttribute("alt","watermark");for(const a in o.style)r.style[a]=o.style[a];for(const a in o.attrs)r.setAttribute(a,o.attrs[a]);r.src=o.src,e.$root.appendChild(r)})(this,r),t.isNativeUI?(z(t),_e(t,a),tt(t,a),void e.$.render(a,t.$root)):(this.icons=E.setupIcons(r.icons),S(t,r),Qe(t,a,r),ht(this),tt(t,a),r.coverButton&&(this.$coverButton=_e(t,a)),Ue(this),ot(this),fe(this),(e=>{var t;const n=e.config.menu,o=[],r=null==(t=e.$controllerBar)?void 0:t.children[1],a=e.$controllerBottom.children[1],i=[r,a].filter(Boolean);function s(e){var t,n;const r=e.target,a=r.getAttribute("aria-label"),i=o.find((e=>e.name==a));i&&"true"!=r.getAttribute("aria-checked")&&("SPAN"==r.tagName.toUpperCase()?(rt(r),null==(t=i.onChange)||t.call(i,i.children[+r.getAttribute("data-index")],r.parentElement.previousElementSibling)):"BUTTON"==r.tagName.toUpperCase()&&(null==(n=i.onClick)||n.call(i,r)))}i.forEach((e=>{e.addEventListener("click",s)})),e.menu.register=function(e){const t=e.name,n=e.icon,s=e.children,l="top"==e.position&&2==i.length;let c="";const d='\n    <button\n      aria-label="'+t+'"\n      '+(l?'data-tooltip-pos="down"':"")+'\n      class="'+$+" "+(n?"":K)+" "+(e.children?"":w)+'"\n      type="button"\n    >'+(n||t)+"</button>";c=e.children?'\n      <div class="'+W+" "+Y+'" data-dropdown-pos="'+e.position+'" aria-label="'+t+'">\n        '+d+"\n        <div class='"+D+" "+(l?U:"")+"' role='menu'>\n          "+s.map(((e,n)=>'<span\n                  role="menuitemradio"\n                  aria-haspopup="false"\n                  aria-label="'+t+'"\n                  class="'+_+'"\n                  aria-checked="'+Boolean(e.default)+'"\n                  data-index="'+n+'"\n                >'+e.name+"</span>")).join("")+"\n          </div>\n      </div>":d,l?r.insertAdjacentHTML("afterbegin",c):a.insertAdjacentHTML("afterbegin",c),o.push(e)},e.menu.unregister=function(e){i.forEach((t=>{var n,o;null==(n=t.querySelector("button[aria-label="+e+"]"))||n.remove(),null==(o=t.querySelector("div[aria-label="+e+"]"))||o.remove()}))},e.menu.select=function(e,t){i.forEach((n=>{rt(n.querySelector("."+D+" > span[aria-label="+e+"]:nth-child("+(t+1)+")"))}))},n&&n.forEach((t=>e.menu.register(t)))})(this),function(e){const t=e.player,n=e.$root,o=e.config.subtitle,r=e.setting;e.subtitle=new mt(t,r,n,o)}(this),function(e){const t=e.player,n=e.config.speeds,o=e.setting;(null==n?void 0:n.length)&&(o.register({key:X,type:"selector",name:t.locales.get("Speed"),icon:E.get("playbackRate"),children:n.map((e=>({name:1==+e?t.locales.get("Normal"):e+"x",value:+e,default:t.playbackRate==+e}))),onChange:e=>{let n=e.value;return t.setPlaybackRate(n)}}),t.on("ratechange",(()=>{const e=t.playbackRate,r=n.findIndex((t=>+t==e));-1==r?o.updateLabel(X,e+"x"):o.select(X,r,!1)})))}(this),j(this),function(t,n){n.forceLandscapeOnFullscreen&&!e.isIOS&&e.isMobile&&t.on("fullscreenchange",(e=>{var n,o;e.payload.isWeb||(t.isFullScreen?null==(n=screen.orientation)||n.lock("landscape"):null==(o=screen.orientation)||o.unlock())}))}(t,r),e.isMobile||!(null==(n=r.keyboard)?void 0:n.focused)&&!(null==(o=r.keyboard)?void 0:o.global)||V(this),e.$.render(a,t.$root),this)}destroy(){}highlight(e){return this.changHighlightSource(e)}}return function(e){return new ft(e)}}));
