/**
 * name: @oplayer/react
 * version: v1.2.8
 * description: React wrapper for oplayer.
 * author: shiyiya
 * homepage: https://github.com/shiyiya/oplayer
 */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("react/jsx-runtime"),require("@oplayer/core"),require("react")):"function"==typeof define&&define.amd?define(["exports","react/jsx-runtime","@oplayer/core","react"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).oplayer_react={},e.jsxRuntime,e.OPlayer,e.React)}(this,(function(e,r,t,n){"use strict";const u=["playing","duration","aspectRatio","plugins","onEvent"];const o=n.forwardRef(((e,o)=>{const i=e.playing,a=e.duration,l=e.aspectRatio,f=void 0===l?9/16:l,d=e.plugins,p=void 0===d?[]:d,y=e.onEvent,v=function(e,r){if(null==e)return{};var t,n,u={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(u[t]=e[t]);return u}(e,u),b=n.useRef(!0),g=n.useRef(y);g.current=y;const m=n.useRef(null),h=s(v.source),R=b.current||!m.current||!m.current.$root,j=n.useCallback((e=>{null===e||m.current&&m.current.$root||(m.current=t.make(e,v).use(p).create(),"number"==typeof a&&m.current.seek(a/1e3),y&&m.current.on((e=>{var r;return null==(r=g.current)?void 0:r.call(g,e)})))}),[]);return c(!R,(()=>{i?m.current.isPlaying||m.current.play():m.current.isPlaying&&m.current.pause()}),[i]),c(!R,(()=>{var e;(v.source instanceof Promise&&h!=v.source||(null==(e=v.source)?void 0:e.src)&&(null==h?void 0:h.src)!==v.source.src)&&m.current.changeSource(v.source)}),[v.source]),c(!R,(()=>{R||"number"!=typeof a||m.current.seek(a/1e3)}),[a]),c(!R,(()=>{v.muted?m.current.mute():m.current.unmute()}),[v.muted]),c(!R,(()=>{m.current.setPlaybackRate(v.playbackRate)}),[v.playbackRate]),n.useEffect((()=>(b.current=!1,()=>{var e;return null==(e=m.current)?void 0:e.destroy()})),[]),n.useImperativeHandle(o,(()=>m.current),[]),n.useMemo((()=>0==f?r.jsx("div",{style:{height:"100%",width:"100%"},ref:j}):r.jsx("div",{style:{width:"100%",paddingTop:100*f+"%",backgroundColor:"#f4f4f4",position:"relative"},children:r.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},ref:j})})),[])})),c=(e,r,t)=>{n.useEffect((()=>{if(e)return r()}),t)};function s(e){const r=n.useRef();return n.useEffect((()=>{r.current=e}),[e]),r.current}e.default=o,e.usePrevious=s,Object.keys(t).forEach((r=>{"default"===r||e.hasOwnProperty(r)||Object.defineProperty(e,r,{enumerable:!0,get:()=>t[r]})})),Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
